# アンビエントエージェントのご紹介

6 min read - 2025年1月14日

今日のAIアプリのほとんどは、おなじみのチャットパターン（「チャット」UX）に従っています。実装は簡単ですが、不必要なインタラクションのオーバーヘッドを生み出し、私たち人間が自分自身をスケールする能力を制限し、LLMの潜在能力を十分に活用することができません。

過去6ヶ月間、LangChainでは異なるアプローチを模索してきました。それは、アンビエント信号に反応し、重要な機会を検出したり、フィードバックが必要な場合にのみユーザー入力を要求するエージェントです。これらのエージェントは、ユーザーを新しいチャットウィンドウに強制するのではなく、最も重要な瞬間にユーザーの注意を向ける手助けをします。

私たちは、これらのパターンを簡単に実装できるようにLangGraphを構築しました。本日、最初の参照実装である、主要なアンビエントエージェントパターンを示すメールアシスタントを公開します。今後数日間で、独自のアンビエントワークフローを構築するのに役立つ追加の例とツールをリリースする予定です。

## アンビエントエージェントとは？

ChatGPT（または他のチャットボット）を使用する場合、会話を開始するのはユーザーです。エージェントは、人間がメッセージを送信することによって開始されます。

これは一部のユースケースには最適ですが、他のユースケースでは非常に制限があります。ユーザーがエージェントに作業をさせたいときはいつでも、チャットインターフェースに入り、メッセージを送信する必要があります。エージェントが作業を開始するには、多くのオーバーヘッドがあります。

追加の制限として、一度に1つの会話しかできません。これにより、私たち人間が自分自身をスケールすることが困難になります。エージェントは、一度に1つのことしかできません。

これらの制限を克服できるUXパラダイムについて考えると、2つの重要な特性を示す必要があります。

* 人間のメッセージによって（のみ）トリガーされるべきではない
* 複数のエージェントを同時に実行できるようにする必要がある

これらの特性が、私たちが「アンビエントエージェント」と呼ぶものを定義しています。

💡

アンビエントエージェントは、イベントストリームをリッスンし、それに応じてアクションを実行し、場合によっては一度に複数のイベントに対してアクションを実行します。

ただし、注目すべきは、アンビエントエージェントが必ずしも完全に自律的であるとは考えていないことです。実際、アンビエントエージェントを一般に公開する上で重要な部分は、これらのエージェントが人間と対話する「タイミング」と「方法」について慎重に検討することだと考えています。

## ヒューマンインザループ

私たちは、ヒューマンインザループを、これらのエージェントが人間と対話する「タイミング」と「方法」を指すために使用します。「方法」については後で説明しますが、ここではまず「タイミング」について説明します。

アンビエントエージェントには、通常、通知、質問、レビューという3つの一般的なヒューマンインザループパターンがあります。

**通知：** ユーザーにイベントが重要であることを知らせますが、アクションは実行しません。これは、ユーザーが見るべきイベントをフラグを立てるのに役立ちますが、エージェントがアクションを実行する権限を与えられていない場合です。メールアシスタントのコンテキストでは、これはエージェントが私の受信箱にあるDocusignにフラグを立てる可能性があります。Docusignに署名することはできませんが、それが存在することは知っておく必要があります。

**質問：** エージェントのブロックを解除するために、ユーザーに質問をします。エージェントは、何らかのアクションを実行しようとしている可能性がありますが、関連情報が不足しているため、最適な方法が不明確です。幻覚を見たり推測したりするのではなく、エージェントに人間に何をすべきかを尋ねさせます。メールアシスタントのコンテキストでは、これはエージェントが会議に参加したいかどうかを私に尋ねる可能性があります。プロンプトに私の会議の好みを指示するものが含まれていない限り、エージェントがそれを知る方法はありません。人間のEAは私に尋ねるでしょうし、エージェントEAもそうすべきです。

**レビュー：** エージェントが実行しようとしているアクションをレビューします。一部のアクションは「危険」なほどであり、エージェントが実行しようとしているすべてのアクションに対してレビューをハードコーディングする価値がある場合があります。人間は、アクションを承認したり、直接編集したり、エージェントにどのように変更するかについて直接フィードバックを与えたりできます。メールアシスタントのコンテキストでは、これは送信メールになる可能性があります。下書きを作成するかもしれませんが、私はそれを承認したり、メッセージコンテンツを直接編集したり、エージェントに特定の方法で修正するように指示したりする必要があります。

## ヒューマンインザループの重要性

このヒューマンインザループコンポーネントは、アンビエントエージェントに3つの重要なメリットをもたらすと考えています。

1. リスクを軽減し、エージェントを本番環境に投入しやすくする
2. 人間のコミュニケーション方法を模倣し、ユーザーの信頼と導入を構築する
3. 長期的な記憶と学習を強化する

**ヒューマンインザループはリスクを軽減します。** エージェントがバックグラウンドで完全に自律的に実行されている場合、本当に間違いを犯すことはできません。特定のアクション（データベースの更新、重要なクライアントへのメール送信など）を実行させる前に、エージェントを非常に信頼する必要があります。ヒューマンインザループを使用すると、これらのアクションを簡単にゲートし、人間の明示的な承認を要求できます。これにより、誤ったメールが送信されないようにすることができます。

**ヒューマンインザループは人間のコミュニケーション方法を模倣します。** 他の人と協力する上で重要な部分は、コミュニケーションをとることです。不明な点がある場合は質問したり、アイデアを伝えたりします。エージェントである「同僚」がいる場合、同様のパターンでコミュニケーションをとることで、ユーザーの信頼とそれによる導入が構築されます。Devinのようなものを考えてみてください。彼らがユーザーがDevinと対話するために選択した主要なインターフェースの1つはSlackです。それは私たちが人間の開発者と対話する場所です。AI開発者とそうしない理由は何でしょうか？コミュニケーションは重要です。

**ヒューマンインザループは長期的な記憶と学習を強化します。** AIエージェントの重要な部分は、時間の経過とともに学習し、人間のユーザーとの整合性を高める能力であると強く信じています。この整合性を実現するためには、何らかの形のユーザーフィードバックが必要です。このヒューマンインザループコンポーネントは、このフィードバックを提供します。

## エージェント受信箱

エージェントが人間とコミュニケーションをとるべき「タイミング」（**通知**、**質問**、**レビュー**）については説明しましたが、「方法」については説明しませんでした。

アンビエントエージェントを実験する際、最初はSlackから始めました。これの主な利点は、私たちが日々の仕事ですでにSlackを使用しているため、注意を引く効率的な方法であり、人間と人間のコミュニケーションと集中化されていることです。

Slackの欠点は、すべての通知を見失いやすいことです。いくつかの通知に応答しないと、Slack通知のバックログが増加します。Slackチャンネル（またはDM）は、ナビゲートするのが最も簡単ではありません。また、エージェントとのコミュニケーション方法が制限されています。簡単にメッセージを送信できますが、それ以外は少しトリッキーです。

私たちは、「エージェント受信箱」と名付けたものに移行しました。これは、アンビエントエージェントと対話するための新しいUXです。これは、メールの受信箱とカスタマーサポートのチケットシステムの組み合わせをモデルにしています。ユーザーとエージェント間のすべてのオープンなコミュニケーションラインを表示し、未処理のアクションを簡単に追跡できるようにします。スタンドアロンUIであるため、ユーザーフィードバックをより簡単に取得できるパネル、ボタン、またはその他のUI機能を追加するのが簡単です。現時点では、アイテムは時間順にソートされていますが、将来的には優先度に基づいてソートできるようになります。現時点では、この受信箱はシングルプレイヤーですが、将来的には、自分に割り当てられているアイテムと他の人に割り当てられているアイテムを確認できるようになります。

_注：エージェント受信箱のオープンソース実装は、木曜日にリリースされる予定です。_

## LangGraphがアンビエントエージェントに最適な理由

アンビエントエージェントを構築するにあたり、LangGraphがこれらのタイプのエージェントをサポートできるようにしました。LangGraph（およびLangGraphプラットフォーム）が備えている、おそらく自分で構築したくないであろういくつかの重要な特性があります。

**組み込みの永続化レイヤー。** LangGraphは、各アクション（またはグラフのノード）間でエージェントの状態を保存する永続化レイヤーによってバックアップされています。これにより、エージェントは本質的に「一時停止」し、ユーザーフィードバックを待つことができます。これは、ヒューマンインザループのインタラクションパターンと短期的な会話型メモリを有効にするために重要です。

**組み込みのヒューマンインザループサポート。** LangGraphは、ヒューマンインザループパターンをネイティブにサポートしています。組み込みの永続化レイヤーが大きな部分を占めていますが、最近、エンドユーザーと通信するための新しい組み込みメソッドである「interrupt」も追加しました。

**組み込みの長期記憶。** LangGraphには、組み込みの長期記憶（本質的には、セマンティック検索をサポートする名前空間付きのキーバリューストア）が付属しています。これにより、エージェントはヒューマンインザループのインタラクション後に「記憶」を簡単に更新できます。

**Cronジョブ。** 多くのアンビエントエージェントは、新しいイベントをチェックするためにスケジュールに従って実行されます。LangGraphプラットフォームには、これをサポートするための組み込みのcronジョブが付属しています。

## AIメールアシスタントの構築

私たちは、LangGraphをアンビエントエージェントの構築に最適なものにするために、私たちが毎日使用するアンビエントエージェントを構築してきました。主なものの1つはメールアシスタントです。過去6ヶ月間に私とやり取りしたことがある場合、AIエージェントがそのメールの下書きを作成した可能性が高く（そして、私があなたを無視した場合、それは間違いなくAIエージェントのせいです）。

本日、そのメールアシスタントを、無料で使用できるホスト型メールエージェントとオープンソースプロジェクトの両方として公開します。ホスト型メールエージェントは、アンビエントエージェントを簡単に試して体験できるようにし、オープンソースバージョンは、この新しい設計パラダイムの参照実装として役立つことを願っています。

